<Window x:Class="Group6WPF.ProfileWindow" 
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:Group6WPF"
        mc:Ignorable="d"
        Title="My Profile - FUMiniTiki" Height="800" Width="1500"
        Background="{StaticResource BackgroundBrush}"
        WindowStartupLocation="CenterScreen"
        ResizeMode="NoResize" Loaded="Window_Loaded">

    <DockPanel Width="1200" HorizontalAlignment="Center" Background="White">
        <!-- HEADER -->
        <Border DockPanel.Dock="Top" Height="70" Background="White" BorderBrush="#EBEBF0" BorderThickness="0,0,0,1">
            <Grid VerticalAlignment="Center">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>

                <!-- Logo -->
                <Button Grid.Column="0" Background="Transparent" BorderThickness="0" Cursor="Hand"
                        ToolTip="Back to Home" Click="LogoButton_Click" Margin="20,0,10,0"
                        Width="110" Height="40">
                    <Image Source="Assets/tiki.png" Stretch="Uniform"/>
                </Button>

                <!-- Search -->

                <Border Grid.Column="1" Height="40" Margin="20,0" VerticalAlignment="Center"
Background="#F8F8FF" BorderBrush="{StaticResource BorderColor}" 
BorderThickness="1" CornerRadius="8">
                    <TextBox x:Name="SearchTextBox" Height="38" Padding="15,0" FontSize="14" BorderThickness="0"
     Background="Transparent" VerticalAlignment="Center"
     Text="Search product by name..."
     Foreground="{StaticResource TextSecondary}" LostFocus="SearchTextBox_LostFocus" GotFocus="SearchTextBox_GotFocus" KeyDown="SearchTextBox_KeyDown"/>
                </Border>

                <!-- Account Icon -->
                <Button x:Name="btnProfile" Grid.Column="3" Margin="10,0" Width="40" Height="40"
                        Background="Transparent" BorderThickness="0" ToolTip="Account" Cursor="Hand" Click="btnProfile_Click">
                    <Image Source="Assets/account.png" Stretch="Uniform"/>
                </Button>

                <!-- Cart Icon -->
                <Grid Grid.Column="4" Margin="10,0">
                    <Button x:Name="btnViewCart" Width="40" Height="40"
                            Background="Transparent" BorderThickness="0" ToolTip="Shopping Cart"
                            Cursor="Hand" Click="btnViewCart_Click">
                        <Image Source="Assets/cart.png" Stretch="Uniform"/>
                    </Button>
                    <Border x:Name="CartBadge" Width="20" Height="20" CornerRadius="10"
                            Background="#FF424E" HorizontalAlignment="Right" VerticalAlignment="Top"
                            Margin="0,-5,-5,0" Visibility="Collapsed">
                        <TextBlock x:Name="CartCountText" Text="0" Foreground="White" FontSize="10" 
                                   FontWeight="Bold" HorizontalAlignment="Center" VerticalAlignment="Center"/>
                    </Border>
                </Grid>
            </Grid>
        </Border>

        <!-- MAIN CONTENT -->
        <Grid Margin="30,20,30,30">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="300"/>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>

            <!-- LEFT SIDEBAR -->
            <Border Grid.Column="0" Background="White" CornerRadius="12" 
                    BorderBrush="{StaticResource BorderColor}" BorderThickness="1"
                    VerticalAlignment="Top" Margin="0,0,20,0">
                <StackPanel Margin="25">
                    <TextBlock Text="👤 My Account" FontSize="18" FontWeight="Bold"
                               Foreground="{StaticResource TextPrimary}" Margin="0,0,0,20"/>

                    <!-- Profile Picture -->
                    <Border Width="80" Height="80" CornerRadius="40" 
                            Background="{StaticResource BorderColor}" Margin="0,0,0,15"
                            HorizontalAlignment="Center">
                        <TextBlock Text="👤" FontSize="40" HorizontalAlignment="Center" 
                                   VerticalAlignment="Center" Foreground="{StaticResource TextSecondary}"/>
                    </Border>

                    <TextBlock x:Name="ProfileNameText" Text="Loading..." FontSize="16" 
                               FontWeight="SemiBold" HorizontalAlignment="Center"
                               Foreground="{StaticResource TextPrimary}" Margin="0,0,0,20"/>

                    <!-- Navigation Menu -->
                    <Button x:Name="ProfileInfoTab" Content="📝 Profile Information" 
                            Style="{StaticResource ProfileTabButtonStyle}" Click="ProfileInfoTab_Click"/>
                    <Button x:Name="OrderHistoryTab" Content="📦 Order History" 
                            Style="{StaticResource ProfileTabButtonStyle}" Click="OrderHistoryTab_Click"/>
                    <Button x:Name="BackHome" Content="🏠 Back Home" 
                            Style="{StaticResource ProfileTabButtonStyle}" Click="BackButton_Click"/>
                    <Button Content="🚪 Logout" Style="{StaticResource ProfileTabButtonStyle}" 
                            Click="LogoutButton_Click" Margin="0,20,0,0"/>
                </StackPanel>
            </Border>

            <!-- RIGHT CONTENT AREA -->
            <Border Grid.Column="1" Background="White" CornerRadius="12" 
                    BorderBrush="{StaticResource BorderColor}" BorderThickness="1" 
                    VerticalAlignment="Top">

                <!-- ✅ WRAPPED CONTENTS IN A GRID TO FIX THE "Child" ERROR -->
                <Grid>
                    <!-- Profile Information Panel -->
                    <StackPanel x:Name="ProfileInfoPanel" Margin="30" Visibility="Visible">
                        <TextBlock Text="Profile Information" FontSize="20" FontWeight="Bold"
                                   Foreground="{StaticResource TextPrimary}" Margin="0,0,0,25"/>

                        <!-- Profile Form -->
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="20"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="20"/>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="20"/>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="20"/>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="30"/>
                                <RowDefinition Height="Auto"/>
                            </Grid.RowDefinitions>

                            <!-- Full Name -->
                            <StackPanel Grid.Row="0" Grid.Column="0">
                                <TextBlock Text="Full Name" FontWeight="SemiBold" 
                                           Foreground="{StaticResource TextPrimary}" Margin="0,0,0,8"/>
                                <TextBox x:Name="NameTextBox" 
                                         Height="45" FontSize="14"/>
                            </StackPanel>

                            <!-- Email -->
                            <StackPanel Grid.Row="0" Grid.Column="2">
                                <TextBlock Text="Email Address" FontWeight="SemiBold" 
                                           Foreground="{StaticResource TextPrimary}" Margin="0,0,0,8"/>
                                <TextBox x:Name="EmailTextBox" 
                                         Height="45" FontSize="14"/>
                            </StackPanel>

                            <!-- Current Password -->
                            <StackPanel Grid.Row="2" Grid.Column="0">
                                <TextBlock Text="Current Password" FontWeight="SemiBold" 
                                           Foreground="{StaticResource TextPrimary}" Margin="0,0,0,8"/>
                                <PasswordBox x:Name="CurrentPasswordBox" 
                                             Height="45" FontSize="14"/>
                            </StackPanel>

                            <!-- New Password -->
                            <StackPanel Grid.Row="2" Grid.Column="2">
                                <TextBlock Text="New Password (Leave blank to keep current)" FontWeight="SemiBold" 
                                           Foreground="{StaticResource TextPrimary}" Margin="0,0,0,8"/>
                                <PasswordBox x:Name="NewPasswordBox" 
                                             Height="45" FontSize="14"/>
                            </StackPanel>

                            <!-- Confirm New Password -->
                            <StackPanel Grid.Row="4" Grid.Column="0">
                                <TextBlock Text="Confirm New Password" FontWeight="SemiBold" 
                                           Foreground="{StaticResource TextPrimary}" Margin="0,0,0,8"/>
                                <PasswordBox x:Name="ConfirmPasswordBox"
                                             Height="45" FontSize="14"/>
                            </StackPanel>

                            <!-- Account Status -->
                            <StackPanel Grid.Row="4" Grid.Column="2">
                                <TextBlock Text="Account Status" FontWeight="SemiBold" 
                                           Foreground="{StaticResource TextPrimary}" Margin="0,0,0,8"/>
                                <CheckBox x:Name="IsActiveCheckBox" Content="Account is active" 
                                          FontSize="14" VerticalAlignment="Center" Height="45"/>
                            </StackPanel>

                            <!-- Error Message -->
                            <TextBlock x:Name="ErrorMessageText" Grid.Row="6" Grid.ColumnSpan="3" 
                                       Text="" Foreground="{StaticResource TikiRed}" FontSize="12" 
                                       Visibility="Collapsed" TextWrapping="Wrap"/>

                            <!-- Action Buttons -->
                            <StackPanel Grid.Row="8" Grid.ColumnSpan="3" Orientation="Horizontal" 
                                        HorizontalAlignment="Right">
                                <Button Content="Cancel" Style="{StaticResource ModernButtonStyle}"
                                        Background="Transparent" Foreground="{StaticResource TextSecondary}"
                                        BorderBrush="{StaticResource BorderColor}" BorderThickness="1"
                                        Click="CancelButton_Click" Margin="0,0,15,0"/>
                                <Button Content="Save Changes" Style="{StaticResource ModernButtonStyle}"
                                        Background="{StaticResource TikiBlue}" Click="SaveButton_Click"/>
                            </StackPanel>
                        </Grid>
                    </StackPanel>

                    <!-- Order History Panel -->
                    <StackPanel x:Name="OrderHistoryPanel" Margin="30" Visibility="Collapsed">
                        <TextBlock Text="Order History" FontSize="20" FontWeight="Bold"
                                   Foreground="{StaticResource TextPrimary}" Margin="0,0,0,25"/>

                        <!-- Order Stats -->
                        <Grid Margin="0,0,0,20">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>

                            <Border Grid.Column="0" Background="#F0F9FF" CornerRadius="8" Padding="15" Margin="0,0,10,0">
                                <StackPanel HorizontalAlignment="Center">
                                    <TextBlock x:Name="TotalOrdersText" Text="0" FontSize="24" FontWeight="Bold"
                                               HorizontalAlignment="Center" Foreground="{StaticResource TikiBlue}"/>
                                    <TextBlock Text="Total Orders" FontSize="12" HorizontalAlignment="Center"
                                               Foreground="{StaticResource TextSecondary}"/>
                                </StackPanel>
                            </Border>

                            <Border Grid.Column="1" Background="#F0FDF4" CornerRadius="8" Padding="15" Margin="5,0">
                                <StackPanel HorizontalAlignment="Center">
                                    <TextBlock x:Name="CompletedOrdersText" Text="0" FontSize="24" FontWeight="Bold"
                                               HorizontalAlignment="Center" Foreground="{StaticResource TikiGreen}"/>
                                    <TextBlock Text="Completed" FontSize="12" HorizontalAlignment="Center"
                                               Foreground="{StaticResource TextSecondary}"/>
                                </StackPanel>
                            </Border>

                            <Border Grid.Column="2" Background="#FEF2F2" CornerRadius="8" Padding="15" Margin="10,0,0,0">
                                <StackPanel HorizontalAlignment="Center">
                                    <TextBlock x:Name="TotalSpentText" Text="0₫" FontSize="24" FontWeight="Bold"
                                               HorizontalAlignment="Center" Foreground="{StaticResource TikiRed}"/>
                                    <TextBlock Text="Total Spent" FontSize="12" HorizontalAlignment="Center"
                                               Foreground="{StaticResource TextSecondary}"/>
                                </StackPanel>
                            </Border>
                        </Grid>

                        <!-- Orders List -->
                        <ScrollViewer Height="400" VerticalScrollBarVisibility="Auto">
                            <StackPanel x:Name="OrdersListPanel">
                                
                            </StackPanel>
                        </ScrollViewer>
                    </StackPanel>
                </Grid>
            </Border>
        </Grid>
    </DockPanel>
</Window>
